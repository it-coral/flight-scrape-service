<!doctype html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang=""> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8" lang=""> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9" lang=""> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang=""> <!--<![endif]-->
	
    <head>
    	{% include "flightsearch/header.html" %}
    	{% load staticfiles %}
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title> {% block title %}{{ category_name }}{% endblock %}</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <style>
            body {
                /*padding-top: 50px;*/
                padding-bottom: 20px;
            }
            
        </style>
        
        <script type="text/javascript">
          
          /*jQuery( document ).ready(function( $ ) {
            var nowTemp = new Date();
            var now = new Date(nowTemp.getFullYear(), nowTemp.getMonth(), nowTemp.getDate(), 0, 0, 0, 0);

            var checkin = $('#dp1').datepicker({
                language: "pt",
                format: "dd/mm/yyyy",
                beforeShowDay: function (date) {
                    return date.valueOf() < now.valueOf() ? false : '';
                }
            }).on('changeDate', function (ev) {
                if (ev.date.valueOf() > checkout.date.valueOf()) {
                    var newDate = new Date(ev.date);
                    newDate.setDate(newDate.getDate() + 1);

                    checkout.setValue(newDate);
                }

                checkin.hide();
                $('#DtChkOut').focus();
            }).data('datepicker');

            var checkout = $('#dp2').datepicker({
                language: "pt",
                format: "dd/mm/yyyy",
                beforeShowDay: function (date) {
                    return date.valueOf() <= checkin.date.valueOf() ? false : '';
                }
            }).on('changeDate', function (ev) {
                checkout.hide();
            }).data('datepicker');
          });*/
        </script>
    </head>

    <body itemscope itemtype="http://schema.org/WebPage">
        <!--[if lt IE 8]>
            <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->

<!-- NAVBAR SECTION/-->

        
	
<!-- BODY SECTION/-->

    <div class="">
      <div class="jumbotron">
        <div class="container">
          <div class="row">
            <div class="col-sm-11 col-xxs-12 col-sm-offset-1">
            	{%if message %}
			    	<h4 class"alert-danger">{{message}}</h4>
			    	{%endif%}
              <h1 class="">Find the best way to travel using your rewards points and miles.</h1> 
            </div>
          </div>
        </div>
        <form class="form-horizontal" role="form" action="searchLoadingPage" method="post" >
        	{% csrf_token %}
          <div class="container-fluid">
            <div class="row">
              <div class="col-sm-11 col-xxs-12 col-sm-offset-1">
                <div class="checkbox-inline mhr10px">
                  <label><input type="radio" id="rt" name="trip" value="roundTripBtn" checked="checked"> Round-Trip</label>
                </div>
                <div class="checkbox-inline mhr10px">
                  <label><input type="radio" id="ow" name="trip" value="oneWayBtn"> One-Way</label>
                </div>
                <div class="checkbox-inline mhr10px">
                  <label><input type="checkbox" id="mc" name="multicity"> Multi-City</label>
                </div>
              </div>
            </div>
            <div class="col-sm-11 col-sm-push-1 col-xs-12 nopadding ">
              <div class="col-sm-2 col-xs-12">
                <div class="form-group nomr noml" class="ui-widget">
                  <label class="sr-only" for="from">From:</label>
                  <input type="search" class="form-control" id="from" name="fromMain" placeholder="From" autocomplete="off">
                </div>
              </div>
              <div class="col-sm-2 col-xs-12">
                <div class="form-group  nomr noml" class="ui-widget">
                  <label class="sr-only" for="to">To:</label>
                  <input type="search" class="form-control" id="to" name="toMain" placeholder="To" autocomplete="off">
                </div>
              </div>
              <div class="input-daterange">
              <div class="col-sm-2 col-xs-12">
                <div class="form-group nomr noml">
                  <label class="sr-only" for="departure">Departure Date:</label>
                  <div class="inner-addon left-addon date" id="dp1">
                      <i class="glyphicon glyphicon-calendar"></i>
                      <input type="text" class="form-control" id="departMain" placeholder="Depart" name="deptdate">
                  </div>
                  <div class="form-group" id="deptmsg"></div>
                </div>
              </div>
              <div class="col-sm-2 col-xs-12" id="return">
                <div class="form-group nomr noml">
                  <label class="sr-only" for="return">Return Date:</label>
                  <div class="inner-addon left-addon date" id="dp2">
                      <i class="glyphicon glyphicon-calendar"></i>
                      <input type="text" class="form-control" id="returnMain" placeholder="Return" name="returndate">
                  </div>
                </div>
              </div>
              </div>
              <div class="col-sm-2 col-xs-12 nopadding">
                <div class="form-group travelers-dpdn-details nomr noml" class="ui-widget">
                  <div class="dropdown travelers-holder">
                  	<span class="form-control" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span id="travelar">1 adult, Economy</span> <span class="caret"></span></span>
                  	<div class="travelers-down-menu dropdown-menu" aria-labelledby="dropdownMenu1">
                  		<div class="col-xs-12 down-menu-block">
							<span class="col-xs-4 nopadding">Class</span>
							<span class="col-xs-8 text-right nopr"><select class="custom-field-control" id="cabintype" name="cabintype">
								<option class="cabin" value="cabintype1">Economy</option>
								<option class="cabin" value="cabintype2">Business</option>
								<option  class="cabin" value="cabintype3">First</option>
								</select></span>                  			
                  		</div>
                  		<div class="col-xs-12 down-menu-block">
                  			<p>
							<span class="col-xs-4 nopadding">Adults</span>
							<span class="col-xs-5 text-right nopadding">
								<span class="btn btn-default btn-xs add"><span class="glyphicon glyphicon-plus"></span></span>
								<input type="text" class="field-width custom-field-control numberHolder qty" value="1" id="adults">								
								<span class="btn btn-default btn-xs minus"><span class="glyphicon glyphicon-minus"></span></span>
							</span>
							<span class="col-xs-3 nopr">18+</span> 
							</p>                 			
                  		</div>
                  		<div class="col-xs-12 down-menu-block">
                  			<p>
							<span class="col-xs-4 nopadding">Seniors</span>
							<span class="col-xs-5 text-right nopadding">
								<span class="btn btn-default btn-xs add"><span class="glyphicon glyphicon-plus"></span></span>
								<input type="text" class="field-width custom-field-control numberHolder qty" value="0" id="senior">								
								<span class="btn btn-default btn-xs minus"><span class="glyphicon glyphicon-minus"></span></span>
							</span>
							<span class="col-xs-3 nopr">65+</span> 
							</p>                 			
                  		</div>
                  		<div class="col-xs-12 down-menu-block">
                  			<p>
							<span class="col-xs-4 nopadding">Youths</span>
							<span class="col-xs-5 text-right nopadding">
								<span class="btn btn-default btn-xs add"><span class="glyphicon glyphicon-plus"></span></span>
								<input type="text" class="field-width custom-field-control numberHolder qty" value="0" id="youth">								
								<span class="btn btn-default btn-xs minus"><span class="glyphicon glyphicon-minus"></span></span>
							</span>
							<span class="col-xs-3 nopr">12-17</span>  
							</p>                			
                  		</div>
                  		<div class="col-xs-12 down-menu-block">
                  			<p>
							<span class="col-xs-4 nopadding">Children</span>
							<span class="col-xs-5 text-right nopadding">
								<span class="btn btn-default btn-xs add"><span class="glyphicon glyphicon-plus"></span></span>
								<input type="text" class="field-width custom-field-control numberHolder qty" value="0" id="children">								
								<span class="btn btn-default btn-xs minus"><span class="glyphicon glyphicon-minus"></span></span>
							</span>
							<span class="col-xs-3 nopr">2-11</span>
							</p>                  			
                  		</div>
                  		<div class="col-xs-12 down-menu-block">
                  			<p>
							<span class="col-xs-4 nopadding">Seat infants</span>
							<span class="col-xs-5 text-right nopadding">
								<span class="btn btn-default btn-xs add"><span class="glyphicon glyphicon-plus"></span></span>
								<input type="text" class="field-width custom-field-control numberHolder qty" value="0" id="seatinfants">								
								<span class="btn btn-default btn-xs minus"><span class="glyphicon glyphicon-minus"></span></span>
							</span>
							<span class="col-xs-3 nopr">under 2</span>  
							</p>                			
                  		</div>
                  		<div class="col-xs-12 down-menu-block">
                  			<p>
							<span class="col-xs-4 nopadding">Lap infants</span>
							<span class="col-xs-5 text-right nopadding">
								<span class="btn btn-default btn-xs add"><span class="glyphicon glyphicon-plus"></span></span>
								<input type="text" class="field-width custom-field-control numberHolder qty" value="0" id="lapinfants">								
								<span class="btn btn-default btn-xs minus"><span class="glyphicon glyphicon-minus"></span></span>
							</span>
							<span class="col-xs-3 nopr">under 2</span> 
							</p>                 			
                  		</div>
                  		<input type="hidden" id="passenger" name="passenger" value="">
                  	</div>
                  </div>
                </div>
              </div>
              <div class="col-sm-2 col-xs-12">
                <button type="submit" class="btn btn-pexSearch" id="submitid">Search</button>
              </div>
            </div>
          </div>
        </form>
      </div>
      <div class="container mvb60px">
        <!-- Example row of columns -->
        <div class="row">
          <div class="col-md-3 col-xxs-12">
            <a href="#"><img src="{% static 'flightsearch/img/specials.jpg' %}"></a>
          </div>
          <div class="col-md-3 col-xxs-12">
              <a href="#"><img src="{% static 'flightsearch/img/specials.jpg' %}"></a>
          </div>
          <div class="col-md-3 col-xxs-12">
              <a href="#"><img src="{% static 'flightsearch/img/specials.jpg' %}"></a>
          </div>
          <div class="col-md-3 col-xxs-12">
              <a href="#"><img src="{% static 'flightsearch/img/specials.jpg' %}"></a>
          </div>
        </div>
      </div>

      {% include "flightsearch/footer.html" %}

      
      </div><!-- /container -->       

    


    <script>window.jQuery || document.write('<script src="js/vendor/jquery-1.11.2.min.js"><\/script>');</script>

    <script src="{% static 'flightsearch/js/vendor/bootstrap.min.js' %}"></script>
    
   <!-- <script src="{% static 'test1/js/main.js' %}"></script> -->

    <!-- Google Analytics: change UA-XXXXX-X to be your site's ID. -->
    <script>
        (function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
        function(){(b[l].q=b[l].q||[]).push(arguments);});b[l].l=+new Date;
        e=o.createElement(i);r=o.getElementsByTagName(i)[0];
        e.src='//www.google-analytics.com/analytics.js';
        r.parentNode.insertBefore(e,r);}(window,document,'script','ga'));
        ga('create','UA-XXXXX-X','auto');ga('send','pageview');
    </script>
    <script>
    $("#submitid").click(function(event) {
    	if($('#from').val().length<1)
    	{
    		//$('#frommsg').append("Please enter the Source field");
    		$('#from').focus();
    		event.preventDefault();
    	} 
    	if($('#to').val().length<1)
    	{
    		$('#to').focus();
    		event.preventDefault();	
    	}
    	if($('#departMain').val().length<1)
    	{
    		$('#departMain').focus();
    		event.preventDefault();	
    	}
				
    });
    $(document).ready(function(){
    	if($("#ow").prop('checked') == true){
    			$("#return").hide();
    		}
    		else
    		{
    			$("#return").show();
    		}
    		if($("#rt").prop('checked') == true){
    			$("#return").show();
    		}
    });
    	$("#ow").click(function(){
    		if($("#ow").prop('checked') == true){
    			$("#return").hide();
    		}
    		else
    		{
    			$("#return").show();
    		}
    		
    	});
    	$("#rt").click(function(){
    		if($("#rt").prop('checked') == true){
    			$("#return").show();
    		}
    		else
    		{
    			$("#return").hide();
    		}
    		
    	});
    	
    $(function() {
    
    $( "#from" ).autocomplete({
    	source: "get_airport/",
    	minLength: 2,
    });
    $( "#to" ).autocomplete({
    	source: "get_airport/",
    	minLength: 2,
    });
  });
  
    	
    </script>
    <script>
    $(function(){
            $('#departMain').datepicker({ minDate: 0});
            $('#returnMain').datepicker({ minDate: 0});
          });
    $('#departMain').on('change', function() {
    	$('#returnMain').datepicker("option", "minDate", $('#departMain').datepicker('getDate'));
	});
var total;
//@@increase decrease on buttom click
    $(function () {
    $('.add').on('click',function(){
    	total = tatalpassenger();
    	if(total < 6 )
    	{
        var $qty=$(this).closest('p').find('.qty');
        var currentVal = parseInt($qty.val());
        if (!isNaN(currentVal)) {
            $qty.val(currentVal + 1);
        }
        travelinfo();
       }
    });
    $('.minus').on('click',function(){
    	total = tatalpassenger();
    	if(total > 1){
        var $qty=$(this).closest('p').find('.qty');
        var currentVal = parseInt($qty.val());
        if (!isNaN(currentVal) && currentVal > 0) {
            $qty.val(currentVal - 1);
        }
        
        travelinfo();
       }
    });
    
});
$('#cabintype').on('change',function(){
	travelinfo();
});

$(document).ready(function(){
	$('#passenger').val('1');
});
//@@@Cabin select@@@@
function travelinfo(){
	total = tatalpassenger();
	$('#passenger').val(total);
	var text;
	if(total == 1){
		text = "traveller";
	}
	else{
		text = "travellers";
	}
	var selectedcabin = $("#cabintype option:selected").text();
	var html = "<span id='travelar'>"+total+" "+text+", "+selectedcabin+"</span>";
	$('#travelar').replaceWith(html);
}

//@@@Total Passenger@@@@
function tatalpassenger() {
var sum = 0;
$('.numberHolder').each(function(){
    sum += parseFloat($(this).val());
});
return sum;
};
 
//@@not close on click dropdown

  $('.dropdown-menu .down-menu-block').click(function(e) {
        e.stopPropagation();
    });
    
    </script>
  </body>
</html>
