<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<title>Pex Search Result</title>
		{% include "flightsearch/header.html" %}
		{% load customfilter %}
		{% load staticfiles %}
		{% load humanize %}
		
		<body>
<style>
.add {
    margin-left: -6px;}
</style>
		<div class="main-holder">
			<div class="col-xs-12 nopadding">
				<div class="jumbotron">
					<div class="container-fluid">
						<div class="col-md-12 col-xs-12 nopadding">
							<div class="col-md-2 col-xs-12 nopadding filters-holder mvb10px ">
								<div class="col-xs-12 nopadding visible-xs filter-collapse form-side">
									<p class="pull-left">Filters</p>
									<p class="pull-right show-filter"><span class="glyphicon glyphicon-th-large"></span></p>
								</div>
								<form action="getsearchresult?keyid={{request.GET.keyid}}&passenger={{request.GET.passenger}}&cabin={{request.GET.cabin}}
								{% if request.GET.returnkey%}&returnkey={{request.GET.returnkey}}{% endif %}{% if request.GET.multicity%}&multicity={{request.GET.multicity}}{% endif %}" method="post">
									{% csrf_token %}
									{% if selectedrow %}
									<input type="hidden" name="rowid" id="rowid" value="{{selectedrow.rowid}}" />
									{% endif %}
									{% if search %}
										{% for searchrow in search %}
									
									<input type="hidden" name="passenger" id="traveller" value="">
									<input type="hidden" name="cabin" {% if cabin %} value="{{cabin}}" {% else %}value="{{request.GET.cabin}}"{% endif%} >	
									<input type="hidden" name="action" {% if 'action' in request.GET and request.GET.action == 'depart' %}value="{{request.GET.action}}" {% else%} value="{{action}}" {%endif%}>
									<input type="hidden" name="tax" id ="fltrtax" {% if request.GET.tax %} value="{{request.GET.tax}}" {%else%} value="{{tax}}"{% endif%}>
									<input type="hidden" name="price" id ="fltrprice" {% if request.GET.price %} value="{{request.GET.price}}" {%else%} value="{{minprice}}"{% endif%}>	
									<input type="hidden" name="searchkeyval"  value="{{ searchrow.searchid }}" id="searchkey"/>
									{% if returndata %}
									<input type="hidden" name="returnkey"   value="{{returndata}}" id="returnkey"/>
									{%endif%}
									{%endfor %}
									{% endif %}
									<input type="hidden" name="deltamin" value="{{deltaminval}}"  />
									<input type="hidden" name="deltatax" value="{{deltatax}}"  />
									<input type="hidden" name="unitedmin" value="{{unitedminval}}"  />
									<input type="hidden" name="unitedtax" value="{{unitedtax}}"  />
									<input type="hidden" name="deltacabin_name" id="" value="{{deltacabin_name}}"/>
									<input type="hidden" name="unitedcabin_name" id="" value="{{unitedcabin_name}}"/>
									<div class="col-md-12 col-xs-12 nopadding form-side">
										<div class="priceRangeInfo">
											DEPARTURE TIME

											<div class="slider slider-blue mvt15px" data-postfix=" $" data-min="0" data-max="2000" data-min-val="400" data-max-val="1400" data-fill="#sample-field-2" id="depart"></div>
											<span id="time"></span>
											<input type="hidden" name="depaturemin" id="depaturemin" value=""/>
											<input type="hidden" name="depaturemax" id="depaturemax" value=""/>
										</div>
										
										<div class="priceRangeInfo mvt15px">
											ARRIVAL TIME
											<div class="slider slider-blue mvt15px" data-postfix=" $" data-min="0" data-max="2000" data-min-val="400" data-max-val="1400" data-fill="#sample-field-2" id="arive"></div>
											<span id="arivaltime"></span>
										</div>
										<input type="hidden" name="arivalmin" id="arivalmin" value=""/>
										<input type="hidden" name="arivalmax" id="arivalmax" value=""/>
										
									</div>
									<div class="col-md-12 col-xs-12 nopadding form-side">
										<p>
											NUMBER OF STOPS
										</p>
										<div class="col-md-10 col-xs-10 nopadding">
										<div class="checkbox">
											<label>
												<input type='checkbox' id="selectallstop">
												<span></span> SELECT ALL </label>
										</div>
										<div class="checkbox">
											<label>
												<input type='checkbox' class="chk-stoppage" name="stoppage" value="NONSTOP" {% for row in filterkey.stoppage %} {% if row == 'NONSTOP'%} checked="checked" {% endif %}{%endfor %}>
												<span></span> NONSTOP </label>
										</div>
										<div class="checkbox">
											<label>
												<input type='checkbox' class="chk-stoppage" name="stoppage" value="1 STOP" {% for row in filterkey.stoppage %} {% if row == '1 STOP'%} checked="checked" {% endif %}{%endfor %}>
												<span></span> 1 STOP </label>
										</div>
										<div class="checkbox">
											<label>
												<input type='checkbox' class="chk-stoppage" name="stoppage" value="2 STOPS" {% for row in filterkey.stoppage %} {% if row == '2 STOPS'%} checked="checked" {% endif %}{%endfor %}>
												<span></span> 2+ STOPS </label>
										</div>
										</div>
									</div>
									<div class="col-md-12 col-xs-12 nopadding form-side">
									<p>AIRLINES</p>
									<div class="col-md-11 col-xs-11 nopadding">
									<div class="checkbox">
									<label>
									<input type='checkbox' id='selectairline' />
									<span></span>
									SELECT ALL
									</label>
									</div>
									<div class="checkbox">
									<label>
									<input type='checkbox' class="chk-airlines" name="airlines" value="delta" {% for row in filterkey.datasource %} {% if row == 'delta'%} checked="checked" {% endif %}{%endfor %}>
									<span></span>
									DELTA AIRLINES
									</label>
									</div>
									<div class="checkbox" >
									<label>
									<input type='checkbox' class="chk-airlines" name="airlines" value="united" {% for row in filterkey.datasource %} {% if row == 'united'%} checked="checked" {% endif %}{%endfor %}>
									<span></span>
									UINTED AIRLINES
									</label>
									</div>
									</div>
									</div>
									
									<input type="hidden" name="search" value="search">
									<div class="col-md-12 col-xs-12 nopadding">
										<input type="submit" value="FILTER" class="btn  btn-pexSearch filter-serch-btn">
									</div>
								</form>
							</div>
							<div class="col-md-8 col-xs-12 xs-nopadding">

								{% if search %}
							
							<div class="col-xs-12 mvb10px nopadding">
								<div class="col-xs-12 nopaddig visible-xs form-side">
									<p class="pull-left">Flight Search</p>
									<p class="pull-right flight-search-show"><span class="glyphicon glyphicon-search"></span></p>
								</div>
								<div class="col-xs-12 nopadding xs-collapse flight-search-panel">
									<form class="form-inline" method="post" action="searchLoadingPage">
										{% csrf_token %}
									{% for searchrow in search %}	
									  <div class="form-group date-wd flight-search-xswd xs-pr5">
									    <label class="sr-only" for="exampleInputEmail3">Source</label>
									    <input type="text" tabindex="1" id="from" class="form_val form-control" value="{{searchrow.source}}">
									  	<input type="hidden" id="fromid" name="fromMain" value="{{searchrow.origin_airport_id}}">
									  </div>
									   <div class="form-group">
									    <h4 class="for-desktop-view arrow-size">&#8594;</h4>
									   <!-- <h4 class="for-mobile-view text-center arrow-size">&#8595;</h4> -->
									  </div>
									  <div class="form-group date-wd flight-search-xswd">
									    <label class="sr-only" for="exampleInputPassword3">Destination</label>
									    <input type="text" tabindex="2" id="to" class="form_val form-control" value="{{searchrow.destination}}">
									  	<input type="hidden" id="toid" name="toMain" value="{{searchrow.destination_airport_id}}">
									  </div>
									  <div class="form-group date-wd flight-search-xswd xs-pr5">
										 <label class="sr-only" for="exampleInputPassword3">Departure</label>
											<div class="inner-addon left-addon date" id="dp1">
										    <i class="glyphicon glyphicon-calendar"></i>
										    <input type="text"  tabindex="3" class="form_val form-control" value="{{searchrow.traveldate|date:"m/d/Y"}}" id="departuredate" name="deptdate">
									  		</div>
									  </div>
									  {%endfor %}
									  {%if returndate %}
									  <div class="form-group date-wd flight-search-xswd">
									    <label class="sr-only" for="exampleInputPassword3">return</label>
									    <div class="inner-addon left-addon date" id="dp2">
									    <i class="glyphicon glyphicon-calendar"></i>
									    <input type="text" tabindex="4" class="form_val form-control" value="{{returndate.0|date:"m/d/Y"}}" id="return" name="returndate">
									  </div>
									  </div>
									  {%endif%}
									  
							<div class="form-group opentab flight-search-xswd" id="cabintab" tabindex="5">
						                <div class="form-group travelers-dpdn-details nomr noml nomb" class="ui-widget">
						                  <div class="dropdown travelers-holder form-control">
						                  	<span class="" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span id="travelar">1 adult, Economy</span> <span class="caret"></span></span>
						                  	<div class="travelers-down-menu dropdown-menu" aria-labelledby="dropdownMenu1">
						                  		<div class="col-xs-12 down-menu-block">
													<span class="col-xs-4 nopadding">Class</span>

													<span class="col-xs-8 text-right nopr"><select class="custom-field-control notclose" id="cabintype" name="cabintype" tabindex="6">
														<option class="cabin" value="maincabin" {% if request.GET.cabin == "maincabin" or cabin == "maincabin" %} selected="selected" {% endif %}>Economy</option>
														<option class="cabin" value="firstclass" {% if request.GET.cabin == "firstclass" or cabin == "firstclass" %} selected="selected" {% endif %}>Business</option>
														<option  class="cabin" value="business" {% if request.GET.cabin == "business" or cabin == "business" %} selected="selected" {% endif %}>First</option>
														</select></span>                  			
						                  		</div>
						                  		<div class="col-xs-12 alert alert-warning"></div>
						                  		<div class="col-xs-12 down-menu-block">
						                  			<p>
													<span class="col-xs-4 nopadding">Adults</span>
													<span class="col-xs-5 text-right nopadding">
														<span class="btn btn-default btn-xs minus"><span class="glyphicon glyphicon-minus"></span></span>
														<input type="text" class="field-width custom-field-control numberHolder qty" value="1" id="adults" tabindex="7">
														<span class="btn btn-default btn-xs add"><span class="glyphicon glyphicon-plus"></span></span>								
													</span>
													<span class="col-xs-3 nopr">18+</span> 
													</p>                 			
						                  		</div>
						                  		<div class="col-xs-12 down-menu-block">
						                  			<p>
													<span class="col-xs-4 nopadding">Seniors</span>
													<span class="col-xs-5 text-right nopadding">
														<span class="btn btn-default btn-xs minus"><span class="glyphicon glyphicon-minus"></span></span>
														<input type="text" class="field-width custom-field-control numberHolder qty" value="0" id="senior" tabindex="8">
														<span class="btn btn-default btn-xs add"><span class="glyphicon glyphicon-plus"></span></span>								
														
													</span>
													<span class="col-xs-3 nopr">65+</span> 
													</p>                 			
						                  		</div>
						                  		<div class="col-xs-12 down-menu-block">
						                  			<p>
													<span class="col-xs-4 nopadding">Youths</span>
													<span class="col-xs-5 text-right nopadding">
														<span class="btn btn-default btn-xs minus"><span class="glyphicon glyphicon-minus"></span></span>
														<input type="text" class="field-width custom-field-control numberHolder qty" value="0" id="youth" tabindex="9">
														<span class="btn btn-default btn-xs add"><span class="glyphicon glyphicon-plus"></span></span>								
														
													</span>
													<span class="col-xs-3 nopr">12-17</span>  
													</p>                			
						                  		</div>
						                  		<div class="col-xs-12 down-menu-block">
						                  			<p>
													<span class="col-xs-4 nopadding">Children</span>
													<span class="col-xs-5 text-right nopadding">
														<span class="btn btn-default btn-xs minus"><span class="glyphicon glyphicon-minus"></span></span>
														<input type="text" class="field-width custom-field-control numberHolder qty" value="0" id="children" tabindex="10">								
														<span class="btn btn-default btn-xs add"><span class="glyphicon glyphicon-plus"></span></span>
														
													</span>
													<span class="col-xs-3 nopr">2-11</span>
													</p>                  			
						                  		</div>
						                  		<div class="col-xs-12 down-menu-block">
						                  			<p>
													<span class="col-xs-4 nopadding">Seat infants</span>
													<span class="col-xs-5 text-right nopadding">
														<span class="btn btn-default btn-xs minus"><span class="glyphicon glyphicon-minus"></span></span>
														<input type="text" class="field-width custom-field-control numberHolder qty" value="0" id="seatinfants" tabindex="11">								
														<span class="btn btn-default btn-xs add"><span class="glyphicon glyphicon-plus"></span></span>
														
													</span>
													<span class="col-xs-3 nopr">under 2</span>  
													</p>                			
						                  		</div>
						                  		<div class="col-xs-12 down-menu-block">
						                  			<p>
													<span class="col-xs-4 nopadding">Lap infants</span>
													<span class="col-xs-5 text-right nopadding">
														<span class="btn btn-default btn-xs minus"><span class="glyphicon glyphicon-minus"></span></span>
														<input type="text" class="field-width custom-field-control numberHolder qty" value="0" id="lapinfants" tabindex="12">								
														<span class="btn btn-default btn-xs add"><span class="glyphicon glyphicon-plus"></span></span>
														
													</span>
													<span class="col-xs-3 nopr">under 2</span> 
													</p>              			
						                  		</div>
						                  		<div class="col-xs-12 down-menu-block">
		                  							<span class="btn btn-pexSearch" id="apply_traveler">Apply</span>
						                  		</div>
						                  		<input type="hidden" id="passenger" name="passenger" value="">
						                  	</div>
						                  </div>
						                </div>
						                
						              </div>
						              
									  <div class="form-group flight-search-xswd xs-pl5">

									    <button class="form_val btn  btn-pexSearch xs-fw" tabindex="13">Change</button>
									  </div>
									</form>
									<!--
									<h4>{% if action == 'return' %}Return : {% endif %}{{searchrow.source}} &#10230; {{searchrow.destination}} </h4>
									<h4> {{searchrow.traveldate}}<!--<input type="text" id="datepicker" name="date" value="{{searchdate}}"></h4>-->
								</div>
							</div>
							
							{% endif %}
								
							
								{% if selectedrow %}
								
								<div class="col-xs-12 selected-flights bgclr">
									<div class="col-xs-12 nopadding visible-xs visible-sm">
										<div class="col-sm-3 col-xs-5 text-left nopl ">
											{% if selectedrow.datasource == "united" %}
											<img src="{% static 'flightsearch/img/unitedLogo.png' %}" class="img-responsive" alt="Responsive image">{% endif %}
											{% if selectedrow.datasource == "delta" %}
											<img src="{% static 'flightsearch/img/deltaLogo.jpg' %}" class="img-responsive" alt="Responsive image">{% endif %}
										</div>
										<div class="col-sm-9 col-xs-7 nopr">
											<p class="flight-name">
												{{selectedrow.flighno}} 
											</p>
										</div>
									</div>
									<div class="col-md-5 col-xs-12 nopadding">
										<div class="col-xs-12 nopadding">
											<div class="col-xs-12 nopadding">
												<div class="col-md-12 col-sm-9 col-xs-9 nopadding">
													<div class="arrivel col-md-5 col-xs-5 col-sm-5 nopadding" itemscope itemtype ="http://schema.org/Flight">
														<p itemprop="departureAirport">
															{{selectedrow.origin}}
														</p>
														<p itemprop="departureTime">
															{{selectedrow.departure}}
														</p>
													</div>
													<div class="arrow-div col-md-2 col-xs-2 col-sm-2 nopadding">&#8594;</div>
													<div class="arrivel-2 col-md-5 col-xs-5 col-sm-5 nopadding text-right" itemscope itemtype ="http://schema.org/Flight">
														<p itemprop="arrivalAirport">
															{{selectedrow.destination}}
														</p>
														<p itemprop="arrivalTime">
															{{selectedrow.arival}}
														</p>
													</div>
												</div>
												<div class="col-sm-3 col-xs-3 nopr visible-sm visible-xs text-center">
													<div class="col-xs-12 nopadding">
														<p class="stops-dur"><span>{{selectedrow.stoppage}}</span> <span>{{row.duration}}</span></p>
													</div>
												</div>
											</div>
										</div>
									</div>
									
									<div class="col-md-2 col-xs-6 text-left xs-nopadding hidden-xs hidden-sm xs-margin-20">
										{% if selectedrow.datasource == "united" %}
										<img src="{% static 'flightsearch/img/unitedLogo.png' %}" class="img-responsive" alt="Responsive image">{% endif %}
										{% if selectedrow.datasource == "delta" %}
										<img src="{% static 'flightsearch/img/deltaLogo.jpg' %}" class="img-responsive" alt="Responsive image">{% endif %}
										<h5>OUTBOUND</h5>
									</div>
											<div class="col-sm-5 col-xs-6 col-xs-12 nopadding hidden-sm hidden-xs for-mobile-view text-right xs-margin-20">
												<p class="flight-name">
													{{selectedrow.flighno}} 
												</p>
												<p class="stops-dur"><span>{{selectedrow.stoppage}}</span> <span>{{selectedrow.duration}}</span></p>												
											</div>
									<div class="col-md-5 col-xs-12 nopadding">
										<div class="col-xs-12 nopadding">
											<div class="col-md-5 col-sm-5 col-xs-12 nopadding hidden-sm hidden-xs for-desktop-view">
												<p class="flight-name">
													{{selectedrow.flighno}} 
												</p>
												<p class="stops-dur"><span>{{selectedrow.stoppage}}</span> <span>{{selectedrow.duration}}</span></p>												
											</div>
											<div class="col-md-7 col-sm-12 col-xs-12 nopadding hidden-xs hidden-sm">
												
												<div class="col-xs-12 nopadding text-center">
													{% if request.GET.cabin == 'maincabin' %}
													<div class="col-xs-12 nopadding na-ra">
														<p class="flight-rate">
															{{selectedrow.maincabin|intcomma}} Miles + <span>${{selectedrow.maintax|floatformat:2}}</span>
														</p>
													</div>
													<h5 class="econom">{{selectedrow.cabintype1}}</h5>
													
													{% endif %}
													{% if request.GET.cabin == 'firstclass' %}
													<div class="col-xs-12 nopadding na-ra">
														<p class="flight-rate">
															{{selectedrow.firstclass|intcomma}} Miles + <span>${{selectedrow.firsttax|floatformat:2}}</span>
														</p>
													</div>
													<h5 class="econom"> {{selectedrow.cabintype2}} </h5>
													
													{% endif %}
													{% if request.GET.cabin == 'business' %}
													<div class="col-xs-12 nopadding na-ra">
														<p class="flight-rate">
															{{selectedrow.business|intcomma}} Miles + <span>${{selectedrow.businesstax|floatformat:2}}</span>
														</p>
													</div>
													<h5 class="econom"> {{selectedrow.cabintype3}} </h5>
													
													{% endif %}
												</div>
																							
											</div>
											<div class="col-sm-12 col-xs-12 nopadding mvt10px visible-sm visible-xs">
												
												<div class="col-xs-12 nopadding text-center">
													{% if request.GET.cabin == 'maincabin' %}
													<div class="col-xs-12 nopadding na-ra text-right">
														<h5 class="econo pull-left nopl nomt"> {{selectedrow.cabintype1}} </h5>
														<p class="flight-rate pull-right">
															{{selectedrow.maincabin|intcomma}} Miles + <span>${{selectedrow.maintax|floatformat:2}}</span>
														</p>
													</div>
													
													{% endif %}
													{% if request.GET.cabin == 'firstclass' %}
													<div class="col-xs-6 nopadding na-ra text-right">
														<h5 class="econo pull-left nopl nomt"> {{selectedrow.cabintype2}} </h5>
														<p class="flight-rate pull-right">
															{{selectedrow.firstclass|intcomma}} Miles + <span>${{selectedrow.firsttax|floatformat:2}}</span>
														</p>
													</div>
													
													{% endif %}
													{% if request.GET.cabin == 'business' %}
													<div class="col-xs-6 nopadding na-ra text-right">
														<h5 class="econo pull-left nopl nomt"> {{selectedrow.cabintype3}} </h5>
														<p class="flight-rate pull-right">
															{{selectedrow.business|intcomma}} Miles + <span>${{selectedrow.businesstax|floatformat:2}}</span>
														</p>
													</div>
													
													{% endif %}
												</div>
																							
											</div>											
										</div>
									</div>
									
									<div class="col-xs-12 nopadding pop-hover xs-nopadding">
											<a class="" role="button" data-toggle="collapse" href="#{{selectedrow.rowid}}" aria-expanded="false" aria-controls="collapseExample">SHOW DETAILS</a>
											<div class="collapse" id="{{selectedrow.rowid}}">
												<div class="well">
													<h2>DEPART</h2>
													<p>
														{{selectedrow.datasource|title}} | {{selectedrow.flighno}} (
																{% if request.GET.cabin == 'maincabin' or cabin == 'maincabin'%}
																	{{selectedrow.cabintype1}} {% elif request.GET.cabin == 'firstclass' or cabin == 'firstclass' %} {{selectedrow.cabintype2}} {% else%}{{selectedrow.cabintype3}} {% endif %})
														
													</p>
													<div class="table-responsive table-date-search">
														<table class="table">
															{% with selectedrow.departdetails|split:'@' as mylist%}
															{% with selectedrow.arivedetails|split:'@' as mylist1%}
															{% with selectedrow.planedetails|split:'@' as mylist2%}
															{% with selectedrow.operatedby|split:'@' as mylist3%}
															<tr itemscope itemtype="http://schema.org/Flight">
																<td><b>Depart: </b></td>
																<td><time itemprop="departureTime">{{mylist.0}}</time></td>
															</tr>
															
															
															<tr itemscope itemtype="http://schema.org/Flight">
															
																<td><b>Arives:</b></td>
																<td><time itemprop="arrivalTime">{{mylist1.0}}</time></td>
															</tr>
															<tr itemscope itemtype="http://schema.org/Flight">
																<td itemprop="flightNumber"><b>Flight:</b></td>
																<td>{{mylist2.0}}</td>
															</tr>
															{% if mylist3.0 %}
																<tr>
																	<td><b>Operated By:</b></td>
																	<td>{{mylist3.0}}</td>
																</tr>
															{% endif %}
															{% if selectedrow.stoppage == '1 STOP' or selectedrow.stoppage == '2 STOPS' or selectedrow.stoppage == '3 STOPS'%}
															<tr>
																<td></td>
																<td>
																	<h5><b>Change planes </b></h5>
																</td>
															</tr>
															<tr itemscope itemtype="http://schema.org/Flight">
																<td><b>Depart: </b></td>
																<td><time itemprop="departureTime">{{mylist.1}}</time></td>
															</tr>
															
															
															<tr itemscope itemtype="http://schema.org/Flight">
																<td><b>Arives:</b></td>
																<td><time itemprop="arrivalTime">{{mylist1.1}}</time></td>
															</tr>
															<tr>
																<td><b>Flight:</b></td>
																<td>{{mylist2.1}}</td>
															</tr>
															{% if mylist3.1 %}
																<tr>
																	<td><b>Operated By:</b></td>
																	<td>{{mylist3.1}}</td>
																</tr>
															{% endif %}
															{% endif %}
															{% if selectedrow.stoppage == '2 STOPS' or selectedrow.stoppage == '3 STOPS'%}
															<tr>
																<td></td>
																<td>
																	<h5><b>Change planes </b></h5>
																</td>
															</tr>
															<tr itemscope itemtype="http://schema.org/Flight">
																<td><b>Depart: </b></td>
																<td><time itemprop="departureTime">{{mylist.2}}</time></td>
															</tr>
															
															
															<tr itemscope itemtype="http://schema.org/Flight">
																<td><b>Arives:</b></td>
																<td><time itemprop="arrivalTime">{{mylist1.2}}</time></td>
															</tr>
															<tr>
																<td><b>Flight:</b></td>
																<td>{{mylist2.2}}</td>
															</tr>
															{% if mylist3.2 %}
																<tr>
																	<td><b>Operated By:</b></td>
																	<td>{{mylist3.2}}</td>
																</tr>
															{% endif %}
															{% endif %}
															{% if selectedrow.stoppage == '3 STOPS' and mylist.3 %}
															<tr>
																<td></td>
																<td>
																	<h5><b>Change planes </b></h5>
																</td>
															</tr>
															<tr itemscope itemtype="http://schema.org/Flight">
																<td><b>Depart: </b></td>
																<td><time itemprop="departureTime">{{mylist.3}}</time></td>
															</tr>
															
															
															<tr itemscope itemtype="http://schema.org/Flight">
																<td><b>Arives:</b></td>
																<td><time itemprop="arrivalTime">{{mylist1.3}}</time></td>
															</tr>
															<tr>
																<td><b>Flight:</b></td>
																<td>{{mylist2.3}}</td>
															</tr>
															{% if mylist3.3 %}
																<tr>
																	<td><b>Operated By:</b></td>
																	<td>{{mylist3.3}}</td>
																</tr>
															{% endif %}
															{% endif %}
															
															
															
															{% endwith %}
															{% endwith %}
															{% endwith %}
															{% endwith %}
															
														</table>
													</div>
													<a href="share?selectedid={{selectedrow.rowid}}&cabin={{request.GET.cabin}}&passenger={{request.GET.passenger}}">share</a>
												</div>
											</div>
										</div>
								</div>
							{% endif %}
							
							
							{% if data %}
								
								{% for row in data %}
								<div class="col-md-12 col-xs-12 centr-info responsive-color-img">
									<div class="col-sm-3 col-xs-5 visible-xs visible-sm nopl">
										<div class="col-xs-12 nopadding text-center" itemscope itemtype ="http://schema.org/Airline">
											{% if row.datasource == "united" %}
												<img itemprop="logo" src="{% static 'flightsearch/img/unitedLogo.png' %}" class="img-responsive" alt="Responsive image">
											{% endif %}
											{% if row.datasource == "delta" %}
												<img itemprop="logo" src="{% static 'flightsearch/img/deltaLogo.jpg' %}" class="img-responsive" alt="Responsive image">
											{% endif %}
										</div>
									</div>
									<div class="col-md-12 col-sm-9 col-xs-7 nopadding" itemscope itemtype ="http://schema.org/Flight">
										<p class="flight-name" itemprop="flightNumber">
											{{row.flighno}} <!--FIRST FLIGHT OPTION RESULT-->
										</p>
									</div>
									<div class="col-md-5 col-xs-12 nopadding hidden-xs hidden-sm">
										<div class="col-sm-8 col-sm-8 col-xs-12 nopl">
											<div class="col-md-12 col-xs-12 nopadding">
													<div class="col-xs-12 nopadding xs-margin-25px">
														<!-- new code  -->
															
														
														
											
														{% if request.GET.cabin == 'maincabin' or cabin == 'maincabin' %}
												  
															<div class="col-xs-12 nopadding mvb10px na-ra" itemscope itemtype ="http://schema.org/FlightReservation">
																<p class="flight-rate" itemprop="totalPrice">
																	{{row.finalprice|intcomma}} Miles +{% if row.taxes %}<span>${{row.taxes|floatformat:2}}</span>  {%else%}{% if returndate %} <span>${{row.maintax|floatadd:row.maintax1|floatformat:2}}</span> {%else%}<span>${{row.maintax|floatformat:2}} </span>{%endif%} {%endif%}
																</p>
															</div> 
														
														{% elif request.GET.cabin == 'firstclass' or cabin == 'firstclass' %}
															<div class="col-xs-12 nopadding mvb10px na-ra" itemscope itemtype ="http://schema.org/FlightReservation">
															<p class="flight-rate" itemprop="totalPrice">
																{{row.finalprice|intcomma}} Miles + {% if returndate%} <span>${{row.firsttax|floatadd:row.firsttax1|floatformat:2}}</span> {%else%}<span>${{row.firsttax|floatformat:2}} </span> {%endif%}
															</p>
														</div>
														{% else %}
															{% if request.GET.cabin == 'business' or cabin == 'business' %}
															<div class="col-xs-12 nopadding mvb10px na-ra" itemscope itemtype ="http://schema.org/FlightReservation">
															<p class="flight-rate" itemprop="totalPrice">
																
																{{row.finalprice|intcomma}} Miles + {% if returndate%} <span>${{row.businesstax|floatadd:row.businesstax1|floatformat:2}}</span> {%else%}<span>${{row.businesstax|floatformat:2}} </span> {%endif%}
																
															</p>
														</div>
														{% endif %}
													{%endif%}
												
													</div>
											</div>
										</div>
										<div class="col-md-4 col-sm-4 col-xs-12 nopl">
											<div class="col-xs-12 nopadding text-center mvb10px" itemscope itemtype ="http://schema.org/Airline">
												{% if row.datasource == "united" %}
												<img itemprop="logo" src="{% static 'flightsearch/img/unitedLogo.png' %}" class="img-responsive" alt="Responsive image">{% endif %}
												{% if row.datasource == "delta" %}
												<img itemprop="logo" src="{% static 'flightsearch/img/deltaLogo.jpg' %}" class="img-responsive" alt="Responsive image">{% endif %}
											</div>
										</div>
									</div>
									
									<div class="col-md-7 col-xs-12 nopadding">
										{% if multicity %}
										{% for i in recordlen  %}
										 {% with row.origin|lookup:i as sources %}
										 <div class="col-xs-12 nopadding flight-div-repeat"> 
										<div class="col-md-8 col-sm-8 col-xs-12 nopadding">
											<div class="col-xs-12 nopadding">
												<div class="arrivel col-sm-5 nopadding col-xs-4" itemscope itemtype ="http://schema.org/Flight">
													<p itemprop="departureAirport">
														{{sources.origin}}
													</p>
													<p>
														<time itemprop="departureTime">{{sources.departure}}</time>
													</p>
												</div>
												<div class="arrow-div col-sm-2 col-xs-1 text-center nopadding">&#8594;</div>
												<div class="arrivel-2 col-sm-4 nopadding text-right col-xs-4 xs-text-center" itemscope itemtype ="http://schema.org/Flight">
													<p itemprop="arrivalAirport">
														{{sources.destination}}
													</p>
													<p>
														<time itemprop="arrivalTime">{{sources.arival}}</time>
													</p>
												</div>
												<div class="col-xs-3 nopadding visible-xs text-right">
													<div class="col-xs-12 nopadding non-stop text-right">
														<p>
															{{sources.stoppage}}
														</p>
													</div>
													<div class="col-xs-12 nopadding non-stop" itemscope itemtype ="http://schema.org/Flight">
														<p itemprop="estimatedFlightDuration">
															{{sources.duration}}
														</p>
													</div>
												</div>
											</div>
											
									{% if returndate == '' and multicity == '' %}	
									<div class="col-xs-12 nopadding mvt10px for-mobile-view"> <!-- main data only mobile -->
										<div class="col-xs-12 nopadding text-center custome-edit-block">
										
											
											 
															{% if request.GET.cabin == 'maincabin' or cabin == 'maincabin' %}
															
																	
																	<div class="col-xs-12 nopadding mvb10px na-ra">
																	<h5 class="econo edit-width-econo">{{row.cabintype1}}</h5>
																	<div class="right-data-responsive" itemscope itemtype="http://schema.org/FlightReservation">
																		<p class="flight-rate" itemprop="totalPrice">
																			{{row.finalprice|intcomma}} Miles +{% if row.taxes %}<span>${{row.taxes|floatformat:2}}</span>  {%else%}{% if returndate %} <span>${{row.maintax|floatadd:row.maintax1|floatformat:2}}</span> {%else%}<span>${{row.maintax|floatformat:2}} </span>{%endif%} {%endif%}
																				   
																			</p>
																		</div>
																	</div>
															{% elif request.GET.cabin == 'firstclass' or cabin == 'firstclass' %}
																	
																	<div class="col-xs-12 nopadding mvb10px na-ra">
																		<h5 class="econo edit-width-econo">{{row.cabintype2}}</h5>
																		<div class="right-data-responsive">
																		<p class="flight-rate">
																				{{row.finalprice|intcomma}} Miles + {% if returndate %} <span>${{row.firsttax|floatadd:row.firsttax1|floatformat:2}}</span> {% else %}<span>${{row.firsttax|floatformat:2}}</span>{% endif %}
																			</p>
																		</div>
																	</div>
																	
															{% else %}
																	{% if request.GET.cabin == 'business' or cabin == 'business' %}
				
																		<div class="col-xs-12 nopadding mvb10px na-ra">
																			<h5 class="econo edit-width-econo">{{row.cabintype3}}</h5>
																			<div class="right-data-responsive" itemscope itemtype="http://schema.org/FlightReservation">
																			<p class="flight-rate" itemprop="totalPrice">
																				{{row.finalprice|intcomma}} Miles +  {% if returndate %} <span>${{row.businesstax|floatadd:row.businesstax1|floatformat:2}}</span>{% else %}<span>${{row.businesstax|floatformat:2}}</span>{% endif %}
																			</p>
																		</div>
																		</div>
																	{% endif %}
															{% endif%}
																									
										</div>
									</div>  
									{% endif %}		
									</div>
										<div class="col-md-4 col-sm-4 col-xs-12 text-center nopr hidden-xs">
											<div class="col-xs-12 nopadding non-stop">
												<p>
													{{sources.stoppage}}
												</p>
												<div class="col-xs-12 nopadding non-stop" itemscope itemtype ="http://schema.org/Flight">
													<p itemprop="estimatedFlightDuration">
														{{sources.duration}}
													</p>
												</div>
											</div>
										</div>
									</div>
									{% endwith %}
										{% endfor %}
										
									{% if multicity %}
									<div class="col-xs-12 nopadding mvt10px for-mobile-view"> <!-- main data only mobile -->
										<div class="col-xs-12 nopadding text-center custome-edit-block">
										
											
											 
															{% if request.GET.cabin == 'maincabin' or cabin == 'maincabin' %}
															
																	
																	<div class="col-xs-12 nopadding mvb10px na-ra">
																	<h5 class="econo edit-width-econo">{{row.cabintype1}}</h5>
																	<div class="right-data-responsive" itemscope itemtype="http://schema.org/FlightReservation">
																		<p class="flight-rate" itemprop="totalPrice">
																			{{row.finalprice|intcomma}} Miles +{% if row.taxes %}<span>${{row.taxes|floatformat:2}}</span>  {%else%}{% if returndate %} <span>${{row.maintax|floatadd:row.maintax1|floatformat:2}}</span> {%else%}<span>${{row.maintax|floatformat:2}} </span>{%endif%} {%endif%}
																				   
																			</p>
																		</div>
																	</div>
															{% elif request.GET.cabin == 'firstclass' or cabin == 'firstclass' %}
																	
																	<div class="col-xs-12 nopadding mvb10px na-ra">
																		<h5 class="econo edit-width-econo">{{row.cabintype2}}</h5>
																		<div class="right-data-responsive">
																		<p class="flight-rate">
																				{{row.finalprice|intcomma}} Miles + {% if returndate %} <span>${{row.firsttax|floatadd:row.firsttax1|floatformat:2}}</span> {% else %}<span>${{row.firsttax|floatformat:2}}</span>{% endif %}
																			</p>
																		</div>
																	</div>
																	
															{% else %}
																	{% if request.GET.cabin == 'business' or cabin == 'business' %}
				
																		<div class="col-xs-12 nopadding mvb10px na-ra">
																			<h5 class="econo edit-width-econo">{{row.cabintype3}}</h5>
																			<div class="right-data-responsive" itemscope itemtype="http://schema.org/FlightReservation">
																			<p class="flight-rate" itemprop="totalPrice">
																				{{row.finalprice|intcomma}} Miles +  {% if returndate %} <span>${{row.businesstax|floatadd:row.businesstax1|floatformat:2}}</span>{% else %}<span>${{row.businesstax|floatformat:2}}</span>{% endif %}
																			</p>
																		</div>
																		</div>
																	{% endif %}
															{% endif%}
																									
										</div>
									</div>  
									{% endif%}
									
									
										
										
										
									{% else %}
										<div class="col-xs-12 nopadding flight-div-repeat"> 
										<div class="col-md-8 col-sm-8 col-xs-12 nopadding">
											<div class="col-xs-12 nopadding">
												<div class="arrivel col-sm-5 nopadding col-xs-4" itemscope itemtype ="http://schema.org/Flight">
													<p itemprop="departureAirport">
														{{row.origin}}
													</p>
													<p>
														<time itemprop="departureTime">{{row.departure}}</time>
													</p>
												</div>
												<div class="arrow-div col-sm-2 col-xs-1 text-center nopadding">&#8594;</div>
												<div class="arrivel-2 col-sm-4 nopadding text-right col-xs-4 xs-text-center" itemscope itemtype ="http://schema.org/Flight">
													<p itemprop="arrivalAirport">
														{{row.destination}}
													</p>
													<p>
														<time itemprop="arrivalTime">{{row.arival}}</time>
													</p>
												</div>
												<div class="col-xs-3 nopadding visible-xs text-right">
													<div class="col-xs-12 nopadding non-stop text-right">
														<p>
															{{row.stoppage}}
														</p>
													</div>
													<div class="col-xs-12 nopadding non-stop" itemscope itemtype ="http://schema.org/Flight">
														<p itemprop="estimatedFlightDuration">
															{{row.duration}}
														</p>
													</div>
												</div>
											</div>
											
									{% if returndate == '' %}	
									<div class="col-xs-12 nopadding mvt10px for-mobile-view"> <!-- main data only mobile -->
										<div class="col-xs-12 nopadding text-center custome-edit-block">
										
											
											 
															{% if request.GET.cabin == 'maincabin' or cabin == 'maincabin' %}
															
																	
																	<div class="col-xs-12 nopadding mvb10px na-ra">
																	<h5 class="econo edit-width-econo">{{row.cabintype1}}</h5>
																	<div class="right-data-responsive" itemscope itemtype="http://schema.org/FlightReservation">
																		<p class="flight-rate" itemprop="totalPrice">
																			{{row.finalprice|intcomma}} Miles +{% if row.taxes %}<span>${{row.taxes|floatformat:2}}</span>  {%else%}{% if returndate %} <span>${{row.maintax|floatadd:row.maintax1|floatformat:2}}</span> {%else%}<span>${{row.maintax|floatformat:2}} </span>{%endif%} {%endif%}
																				   
																			</p>
																		</div>
																	</div>
															{% elif request.GET.cabin == 'firstclass' or cabin == 'firstclass' %}
																	
																	<div class="col-xs-12 nopadding mvb10px na-ra">
																		<h5 class="econo edit-width-econo">{{row.cabintype2}}</h5>
																		<div class="right-data-responsive">
																		<p class="flight-rate">
																				{{row.finalprice|intcomma}} Miles + {% if returndate %} <span>${{row.firsttax|floatadd:row.firsttax1|floatformat:2}}</span> {% else %}<span>${{row.firsttax|floatformat:2}}</span>{% endif %}
																			</p>
																		</div>
																	</div>
																	
															{% else %}
																	{% if request.GET.cabin == 'business' or cabin == 'business' %}
				
																		<div class="col-xs-12 nopadding mvb10px na-ra">
																			<h5 class="econo edit-width-econo">{{row.cabintype3}}</h5>
																			<div class="right-data-responsive" itemscope itemtype="http://schema.org/FlightReservation">
																			<p class="flight-rate" itemprop="totalPrice">
																				{{row.finalprice|intcomma}} Miles +  {% if returndate %} <span>${{row.businesstax|floatadd:row.businesstax1|floatformat:2}}</span>{% else %}<span>${{row.businesstax|floatformat:2}}</span>{% endif %}
																			</p>
																		</div>
																		</div>
																	{% endif %}
															{% endif%}
																									
										</div>
									</div>  
									{% endif %}		
									</div>
										<div class="col-md-4 col-sm-4 col-xs-12 text-center nopr hidden-xs">
											<div class="col-xs-12 nopadding non-stop">
												<p>
													{{row.stoppage}}
												</p>
												<div class="col-xs-12 nopadding non-stop" itemscope itemtype ="http://schema.org/Flight">
													<p itemprop="estimatedFlightDuration">
														{{row.duration}}
													</p>
												</div>
											</div>
										</div>
									</div>
									
									{% endif %}	
									
									<!-- terurn data block -->
									{% if returndate and row.origin1 %}
									 
									<div class="col-xs-12 nopadding flight-div-repeat"> 
										<div class="col-md-8 col-sm-8 col-xs-12 nopadding">
											<div class="col-xs-12 nopadding">
												<div class="arrivel col-sm-5 nopadding col-xs-4" itemscope itemtype ="http://schema.org/Flight">
													<p itemprop="departureAirport">
														{{row.origin1}}
													</p>
													<p>
														<time itemprop="departureTime">{{row.departure1}}</time>
													</p>
												</div>
												<div class="arrow-div col-sm-2 col-xs-1 text-center nopadding">&#8594;</div>
												<div class="arrivel-2 col-sm-4 nopadding text-right col-xs-4 xs-text-center" itemscope itemtype ="http://schema.org/Flight">
													<p itemprop="arrivalAirport">
														{{row.destination1}}
													</p>
													<p>
														<time itemprop="arrivalTime">{{row.arival1}}</time>
													</p>
												</div>
												<div class="col-xs-3 nopadding visible-xs text-right">
													<div class="col-xs-12 nopadding non-stop text-right">
														<p>
															{{row.stoppage1}}
														</p>
													</div>
													<div class="col-xs-12 nopadding non-stop" itemscope itemtype ="http://schema.org/Flight">
														<p itemprop="estimatedFlightDuration">
															{{row.duration1}}
														</p>
													</div>
												</div>
											</div>
											
									</div>
										<div class="col-md-4 col-sm-4 col-xs-12 text-center nopr hidden-xs">
											<div class="col-xs-12 nopadding non-stop">
												<p>
													{{row.stoppage1}}
												</p>
												<div class="col-xs-12 nopadding non-stop" itemscope itemtype ="http://schema.org/Flight">
													<p itemprop="estimatedFlightDuration">
														{{row.duration1}}
													</p>
												</div>
											</div>
										</div>
									</div> <!-- end retun block -->
								
								
								<div class="col-xs-12 nopadding mvt10px for-mobile-view"> <!-- main data only mobile  if return in present -->
										<div class="col-xs-12 nopadding text-center custome-edit-block"> 
											{% if request.GET.cabin == 'maincabin' or cabin == 'maincabin' %}
											
													
													<div class="col-xs-12 nopadding mvb10px na-ra">
													<h5 class="econo edit-width-econo">{{row.cabintype1}}</h5>
													<div class="right-data-responsive" itemscope itemtype="http://schema.org/FlightReservation">
														<p class="flight-rate" itemprop="totalPrice">
																
																{{row.finalprice|intcomma}} Miles + {% if returndate %} <span>${{row.maintax|floatadd:row.maintax1|floatformat:2}}</span> {% else%} <span>${{row.maintax|floatformat:2}}</span> {% endif %} 
															</p>
														</div>
													</div>
											{% elif request.GET.cabin == 'firstclass' or cabin == 'firstclass' %}
													
													<div class="col-xs-12 nopadding mvb10px na-ra">
														<h5 class="econo edit-width-econo">{{row.cabintype2}}</h5>
														<div class="right-data-responsive">
														<p class="flight-rate">
																{{row.finalprice|intcomma}} Miles + {% if returndate %}<span>${{row.firsttax|floatadd:row.firsttax1|floatformat:2}}</span> {% else%} <span>${{row.firsttax|floatformat:2}}</span> {% endif %}
															</p>
														</div>
													</div>
													
											{% else %}
													{% if request.GET.cabin == 'business' or cabin == 'business' %}

														<div class="col-xs-12 nopadding mvb10px na-ra">
															<h5 class="econo edit-width-econo">{{row.cabintype3}}</h5>
															<div class="right-data-responsive" itemscope itemtype="http://schema.org/FlightReservation">
															<p class="flight-rate" itemprop="totalPrice">
																{{row.finalprice|intcomma}} Miles + {% if returndate %}<span>${{row.businesstax|floatadd:row.businesstax1|floatformat:2}}</span>{% else%} <span>${{row.businesstax|floatformat:2}}</span> {% endif %} 
															</p>
														</div>
														</div>
													{% endif %}
											{% endif%}											
										</div>
									</div>  
							{% endif%}	
							
									
									
										<a class="show-details" role="button" data-toggle="collapse" href="#{{row.newid}}" aria-expanded="false" aria-controls="collapseExample">SHOW DETAILS</a>
										<h4 class="econo hidden-xs"> 
												
													{% if request.GET.cabin == 'maincabin' or cabin == 'maincabin'%}
													{{row.cabintype1}} {% elif request.GET.cabin == 'firstclass' or cabin == 'firstclass' %} {{row.cabintype2}} {% else%}{{row.cabintype3}} {% endif %}</h4>	
												
										<div class="col-xs-12 pop-hover nopadding">
											<div class="collapse" id="{{row.newid}}">
												<!-- Lower change -->
												
												{% if row.multidetail_list %}
													{% for i in recordlen  %}
													{% with row.multidetail_list|lookup:i as details %}
															<h2>Flight {{i|add:1}}</h2>
																<!--
																<p itemprop="flightNumber">
																{{row.datasource|title}} | {{row.flighno}} (
																{% if request.GET.cabin == 'maincabin' or cabin == 'maincabin'%}
																{{row.cabintype1}} {% elif request.GET.cabin == 'firstclass' or cabin == 'firstclass' %} {{row.cabintype2}} {% else%}{{row.cabintype3}} {% endif %})
																</p> -->
																<div class="table-responsive table-date-search">
																<table class="table">
													                    {% with details.departdetails|split:'@' as mylist%}
													                    {% with details.arivedetails|split:'@' as mylist1%}
													                    {% with details.planedetails|split:'@' as mylist2%}
													                    {% with details.operatedby|split:'@' as mylist3%}
													                    <tr itemscope itemtype="http://schema.org/Flight">
													                            <td><b>Depart: </b></td>
													                            <td><time itemprop="departureTime">{{mylist.0}}</time></td>
													                    </tr>
													
													
													                    <tr itemscope itemtype="http://schema.org/Flight">
													
													                            <td><b>Arives:</b></td>
													                            <td><time itemprop="arrivalTime">{{mylist1.0}}</time></td>
													                    </tr>
													                    <tr itemscope itemtype="http://schema.org/Flight">
													                            <td itemprop="flightNumber"><b>Flight:</b></td>
													                            <td>{{mylist2.0}}</td>
													                    </tr>
													                    {% if mylist3.0 %}
													                            <tr>
													                                    <td><b>Operated By:</b></td>
													                                    <td>{{mylist3.0}}</td>
													                            </tr>
													                    {% endif %}
													                    {% if mylist1.1 %}
													                    <tr>
													                            <td></td>
													                            <td>
													                                    <h5><b>Change planes </b></h5>
													                            </td>
													                    </tr>
													                    <tr itemscope itemtype="http://schema.org/Flight">
													                            <td><b>Depart: </b></td>
													                            <td><time itemprop="departureTime">{{mylist.1}}</time></td>
													                    </tr>
													
													
													                    <tr itemscope itemtype="http://schema.org/Flight">
													                            <td><b>Arives:</b></td>
													                            <td><time itemprop="arrivalTime">{{mylist1.1}}</time></td>
													                    </tr>
													                    <tr>
													                            <td><b>Flight:</b></td>
													                            <td>{{mylist2.1}}</td>
													                    </tr>
													                    {% if mylist3.1 %}
													                            <tr>
													                                    <td><b>Operated By:</b></td>
													                                    <td>{{mylist3.1}}</td>
													                            </tr>
													                    {% endif %}
													
													                    {% endif %}
													                    {% if mylist.2 %}
													                    <tr>
													                            <td></td>
													                            <td>
													                                    <h5><b>Change planes </b></h5>
													                            </td>
													                    </tr>
													                    <tr itemscope itemtype="http://schema.org/Flight">
													                            <td><b>Depart: </b></td>
													                            <td><time itemprop="departureTime">{{mylist.2}}</time></td>
													                    </tr>
													
													
													                    <tr itemscope itemtype="http://schema.org/Flight">
													                            <td><b>Arives:</b></td>
													                            <td><time itemprop="arrivalTime">{{mylist1.2}}</time></td>
													                    </tr>
													                    <tr>
													                            <td><b>Flight:</b></td>
													                            <td>{{mylist2.2}}</td>
													                    </tr>
													                    {% if mylist3.2 %}
													                            <tr>
													                                    <td><b>Operated By:</b></td>
													                                    <td>{{mylist3.2}}</td>
													                            </tr>
													                    {% endif %}
													                    {% endif %}
													                    {% if mylist.3 %}
													                    <tr>
													                            <td></td>
													                            <td>
													                                    <h5><b>Change planes </b></h5>
													                            </td>
													                    </tr>
													                    <tr itemscope itemtype="http://schema.org/Flight">
													                            <td><b>Depart: </b></td>
													                            <td><time itemprop="departureTime">{{mylist.3}}</time></td>
													                    </tr>
													
													
													                    <tr itemscope itemtype="http://schema.org/Flight">
													                            <td><b>Arives:</b></td>
													                            <td><time itemprop="arrivalTime">{{mylist1.3}}</time></td>
													                    </tr>
													                    <tr>
													                            <td><b>Flight:</b></td>
													                            <td>{{mylist2.3}}</td>
													                    </tr>
													                    {% if mylist3.3 %}
													                            <tr>
													                                    <td><b>Operated By:</b></td>
													                                    <td>{{mylist3.3}}</td>
													                            </tr>
													                    {% endif %}
													                    {% endif %}
													
													
													                    {% endwith %}
													                    {% endwith %}
													                    {% endwith %}
													                    {% endwith %}
													            </table>
													    </div>
																									
													{%endwith%}
													{% endfor %}
												{% else %}
													
												<!-- upper change -->	
												<div class="well" itemscope itemtype="http://schema.org/Flight">
													<h2>DEPART</h2>
													<p itemprop="flightNumber">
															{{row.datasource|title}} | {{row.flighno}} (
																{% if request.GET.cabin == 'maincabin' or cabin == 'maincabin'%}
																	{{row.cabintype1}} {% elif request.GET.cabin == 'firstclass' or cabin == 'firstclass' %} {{row.cabintype2}} {% else%}{{row.cabintype3}} {% endif %})
														
													</p>
													<div class="table-responsive table-date-search">
														
														<table class="table">
															{% with row.departdetails|split:'@' as mylist%}
															{% with row.arivedetails|split:'@' as mylist1%}
															{% with row.planedetails|split:'@' as mylist2%}
															{% with row.operatedby|split:'@' as mylist3%}
															<tr itemscope itemtype="http://schema.org/Flight">
																<td><b>Depart: </b></td>
																<td><time itemprop="departureTime">{{mylist.0}}</time></td>
															</tr>
															
															
															<tr itemscope itemtype="http://schema.org/Flight">
															
																<td><b>Arives:</b></td>
																<td><time itemprop="arrivalTime">{{mylist1.0}}</time></td>
															</tr>
															<tr itemscope itemtype="http://schema.org/Flight">
																<td itemprop="flightNumber"><b>Flight:</b></td>
																<td>{{mylist2.0}}</td>
															</tr>
															{% if mylist3.0 %}
																<tr>
																	<td><b>Operated By:</b></td>
																	<td>{{mylist3.0}}</td>
																</tr>
															{% endif %}
															{% if row.stoppage == '1 STOP' or row.stoppage == '2 STOPS' or row.stoppage == '3 STOPS'%}
															<tr>
																<td></td>
																<td>
																	<h5><b>Change planes </b></h5>
																</td>
															</tr>
															<tr itemscope itemtype="http://schema.org/Flight">
																<td><b>Depart: </b></td>
																<td><time itemprop="departureTime">{{mylist.1}}</time></td>
															</tr>
															
															
															<tr itemscope itemtype="http://schema.org/Flight">
																<td><b>Arives:</b></td>
																<td><time itemprop="arrivalTime">{{mylist1.1}}</time></td>
															</tr>
															<tr>
																<td><b>Flight:</b></td>
																<td>{{mylist2.1}}</td>
															</tr>
															{% if mylist3.1 %}
																<tr>
																	<td><b>Operated By:</b></td>
																	<td>{{mylist3.1}}</td>
																</tr>
															{% endif %}
															
															{% endif %}
															{% if row.stoppage == '2 STOPS' or row.stoppage == '3 STOPS' %}
															<tr>
																<td></td>
																<td>
																	<h5><b>Change planes </b></h5>
																</td>
															</tr>
															<tr itemscope itemtype="http://schema.org/Flight">
																<td><b>Depart: </b></td>
																<td><time itemprop="departureTime">{{mylist.2}}</time></td>
															</tr>
															
															
															<tr itemscope itemtype="http://schema.org/Flight">
																<td><b>Arives:</b></td>
																<td><time itemprop="arrivalTime">{{mylist1.2}}</time></td>
															</tr>
															<tr>
																<td><b>Flight:</b></td>
																<td>{{mylist2.2}}</td>
															</tr>
															{% if mylist3.2 %}
																<tr>
																	<td><b>Operated By:</b></td>
																	<td>{{mylist3.2}}</td>
																</tr>
															{% endif %}
															{% endif %}
															{% if row.stoppage == '3 STOPS' and mylist.3 %}
															<tr>
																<td></td>
																<td>
																	<h5><b>Change planes </b></h5>
																</td>
															</tr>
															<tr itemscope itemtype="http://schema.org/Flight">
																<td><b>Depart: </b></td>
																<td><time itemprop="departureTime">{{mylist.3}}</time></td>
															</tr>
															
															
															<tr itemscope itemtype="http://schema.org/Flight">
																<td><b>Arives:</b></td>
																<td><time itemprop="arrivalTime">{{mylist1.3}}</time></td>
															</tr>
															<tr>
																<td><b>Flight:</b></td>
																<td>{{mylist2.3}}</td>
															</tr>
															{% if mylist3.3 %}
																<tr>
																	<td><b>Operated By:</b></td>
																	<td>{{mylist3.3}}</td>
																</tr>
															{% endif %}
															{% endif %}
															
															
															{% endwith %}
															{% endwith %}
															{% endwith %}
															{% endwith %}
														</table>
														
													</div>
													
													<!--  FOR RETURN DELTA BLOCK -->
													{% if returndate and row.origin1 %}
													<div class="well" itemscope itemtype="http://schema.org/Flight">
													<h2>RETURN</h2>
													<p itemprop="flightNumber">
														{{row.datasource|title}} | {{row.flighno1}} 
														({% if request.GET.cabin == 'maincabin' or cabin == 'maincabin'%}
												{{row.cabintype11}} {% elif request.GET.cabin == 'firstclass' or cabin == 'firstclass' %} {{row.cabintype21}} {% else%}{{row.cabintype31}} {% endif %})
													</p>
													<div class="table-responsive table-date-search">
														
														<table class="table">
															{% with row.departdetails1|split:'@' as mylist%}
															{% with row.arivedetails1|split:'@' as mylist1%}
															{% with row.planedetails1|split:'@' as mylist2%}
															{% with row.operatedby1|split:'@' as mylist3%}
															<tr itemscope itemtype="http://schema.org/Flight">
																<td><b>Depart: </b></td>
																<td><time itemprop="departureTime">{{mylist.0}}</time></td>
															</tr>
															
															
															<tr itemscope itemtype="http://schema.org/Flight">
															
																<td><b>Arives:</b></td>
																<td><time itemprop="arrivalTime">{{mylist1.0}}</time></td>
															</tr>
															<tr itemscope itemtype="http://schema.org/Flight">
																<td itemprop="flightNumber"><b>Flight:</b></td>
																<td>{{mylist2.0}}</td>
															</tr>
															{% if mylist3.0 %}
															<tr>
																<td><b>Operated By:</b></td>
																<td>{{mylist3.0}}</td>
															</tr>
															{%endif%}
															{% if row.stoppage1 == '1 STOP' or row.stoppage1 == '2 STOPS' or row.stoppage1 == '3 STOPS'%}
															<tr>
																<td></td>
																<td>
																	<h5><b>Change planes </b></h5>
																</td>
															</tr>
															<tr itemscope itemtype="http://schema.org/Flight">
																<td><b>Depart: </b></td>
																<td><time itemprop="departureTime">{{mylist.1}}</time></td>
															</tr>
															
															
															<tr itemscope itemtype="http://schema.org/Flight">
																<td><b>Arives:</b></td>
																<td><time itemprop="arrivalTime">{{mylist1.1}}</time></td>
															</tr>
															<tr>
																<td><b>Flight:</b></td>
																<td>{{mylist2.1}}</td>
															</tr>
															{% if mylist3.1 %}
																<tr>
																	<td><b>Operated By:</b></td>
																	<td>{{mylist3.1}}</td>
																</tr>
															{% endif%}
															
															{% endif %}
															{% if row.stoppage1 == '2 STOPS' or row.stoppage1 == '3 STOPS'%}
															<tr>
																<td></td>
																<td>
																	<h5><b>Change planes </b></h5>
																</td>
															</tr>
															<tr itemscope itemtype="http://schema.org/Flight">
																<td><b>Depart: </b></td>
																<td><time itemprop="departureTime">{{mylist.2}}</time></td>
															</tr>
															
															
															<tr itemscope itemtype="http://schema.org/Flight">
																<td><b>Arives:</b></td>
																<td><time itemprop="arrivalTime">{{mylist1.2}}</time></td>
															</tr>
															<tr>
																<td><b>Flight:</b></td>
																<td>{{mylist2.2}}</td>
															</tr>
															{% if mylist3.2 %}
																<tr>
																	<td><b>Operated By:</b></td>
																	<td>{{mylist3.2}}</td>
																</tr>
															{% endif %}
														{% endif %}
														{% if row.stoppage1 == '3 STOPS' and mylist.3 %}
															<tr>
																<td></td>
																<td>
																	<h5><b>Change planes </b></h5>
																</td>
															</tr>
															<tr itemscope itemtype="http://schema.org/Flight">
																<td><b>Depart: </b></td>
																<td><time itemprop="departureTime">{{mylist.3}}</time></td>
															</tr>
															
															
															<tr itemscope itemtype="http://schema.org/Flight">
																<td><b>Arives:</b></td>
																<td><time itemprop="arrivalTime">{{mylist1.3}}</time></td>
															</tr>
															<tr>
																<td><b>Flight:</b></td>
																<td>{{mylist2.3}}</td>
															</tr>
															{% if mylist3.3 %}
																<tr>
																	<td><b>Operated By:</b></td>
																	<td>{{mylist3.3}}</td>
																</tr>
															{% endif %}
															{% endif %}
													
													
													{% endwith %}
													{% endwith %}
													{% endwith %}
													{% endwith %}
												</table>
												</div>
												</div>
											{% endif %}
											<!-- RETTUN  BLOCK END  -->
											
											{% if action == 'depart' %}
													<div>
													<form action="getsearchresult" method="get">
														{% csrf_token %}
														<input type="hidden" name="cabin"  value="{{request.GET.cabin}}">
														<input type="hidden" name="rowid"  value="{{row.rowid}}">
														<input type="hidden" name="price" 
														{% if request.GET.cabin == 'maincabin' or cabin == 'maincabin'%} 
														 value="{{row.maincabin}}" {% elif request.GET.cabin == 'firstclass' or cabin == 'firstclass'%} 
														 value="{{row.firstclass}}"{% else %}{% if request.GET.cabin == 'business' or cabin == 'business'%} 
														 value="{{row.business}}"{%endif%}{% endif %}>
														<input type="hidden" name="tax"
														{% if request.GET.cabin == 'maincabin' or cabin == 'maincabin'%} 
														 value="{{row.maintax}}" {% elif request.GET.cabin == 'firstclass' or cabin == 'firstclass'%} 
														 value="{{row.firsttax}}"{% else %}{% if request.GET.cabin == 'business' or cabin == 'business'%} 
														 value="{{row.businesstax}}"{%endif%}{% endif %}>
														<input type="hidden" name="action"  value="return">
														<input type="hidden" name="datasource"  value="{{row.datasource}}">
														<input type="hidden" name="passenger"  value="{{request.GET.passenger}}">
														<input type="hidden" name="keyid"  value="{{row.searchkeyid}}">
														<input type="hidden" name="returnkey"  {% if returndata %} value="{{returndata}}"{%endif%}>
														<button type"submit" value="{{searchrow.searchid}}" name="return" class="btn btn-pexSearch">Other Options For Return Flight</button>
													</form>
													</div>
											{% endif %}
												<!-- END RETURN UNITED BLOCK -->
													
													
													
													<!-- <a href="share?selectedid={{row.rowid}}&cabin={{request.GET.cabin}}&passenger={{request.GET.passenger}}{% if request.GET.returnkey and row.datasource == 'united' and unitedreturn.0.rowid %}&returnrowid={{unitedreturn.0.rowid}}{%endif%}{% if request.GET.returnkey and row.datasource == 'delta' and deltareturn.0.rowid%}&returnrowid={{deltareturn.0.rowid}}{%endif%}" data-toggle="modal" data-target="#myModal">share</a> -->
													<a href="#" data-toggle="modal" class="share" data-target="#share-modal" id="{{row.rowid}}">share</a>
												</div>
											{% endif %}
											</div>
										</div>
									</div>
								</div>
								{% endfor %}
								
							{% endif %}					
							</div>
							
							<div class="col-md-2 col-xs-12 nopadding "><img src="{% static 'flightsearch/img/ad.jpg' %}"  alt="Responsive image" class="img-responsive">

							</div>
							
						</div>
					</div>
				</div>
			</div>
			<div id="content"></div>
			<p id="back-top">
				<a href="#top"><span class="glyphicon glyphicon-chevron-up"></span> TOP</a>
			</p>
		</div>
		
		<!-- Modal -->
		<div class="modal fade" id="share-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
		  <div class="modal-dialog" role="document">
		    <div class="modal-content">
		    	<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
		      <div class="modal-body">
		        <div>
				  <!-- Nav tabs -->
				  <ul class="nav nav-tabs" role="tablist">
				    <li role="presentation" class="active"><a href="#facebook" aria-controls="facebook" role="tab" data-toggle="tab">Facebook</a></li>
				    <li role="presentation"><a href="#twitter" aria-controls="twitter" role="tab" data-toggle="tab">Twitter</a></li>
				    <!-- <li role="presentation"><a href="#messages" aria-controls="messages" role="tab" data-toggle="tab">Email</a></li>
				    <li role="presentation"><a href="#link" aria-controls="link" role="tab" data-toggle="tab">Link</a></li> -->
				  </ul>
				
				  <!-- Tab panes -->
				  <div class="tab-content">
				    <div role="tabpanel" class="tab-pane active" id="facebook">
				    	<form class="mvt10px mvb10px" action="#" methos="post">
				    		<div class="media">
							  <div class="media-left">
							    <a href="#">
							      <img class="media-object" src="{% static 'flightsearch/img/headshot_whitebg.png' %}" alt="">
							    </a>
							  </div>
							  <div class="media-body">
							    <div class="form-group">
							    	<textarea rows="3" class="form-control" placeholder="Enter your comment"></textarea>
							    </div>
							    <div class="media">
								  <div class="media-left">
								    <a href="#">
								      <img class="media-object" src="{% static 'flightsearch/img/logoMain.png' %}" alt="">
								    </a>
								    <input type="hidden" id="recorid" value="">
								  </div>
								  
								  <div class="media-body">
								    <h4 class="media-heading">Hey, I found a great flight on Pex from ({{search.0.source}}) to ({{search.0.destination}}). Join me.</h4>
								    <p></p>
								  </div>
								</div>
							  </div>
							</div>
							<div class="form-group mvt10px">
							<a href="https://www.facebook.com/sharer/sharer.php?u=http://pex.techens.com/share?keyid={{request.GET.keyid}}%26cabin={{request.GET.cabin}}%26passenger={{request.GET.passenger}}{% if request.GET.returnkey %}%26returnkey={{request.GET.returnkey}}{%endif%}">	<span class="btn btn-pexSearch filter-serch-btn">Post</span></a>
							</div>
				    	</form>
				    </div>
				    <div role="tabpanel" class="tab-pane" id="twitter">
				    	<form class="mvt10px mvb10px">
				    		<div class="form-group">
				    			<label>Tweet about this</label>
				    			<textarea rows="2" class="form-control" placeholder="Enter your tweet"></textarea>
				    		</div>
				    		<div class="form-group">
				    			<button type="submit" class="btn btn-pexSearch filter-serch-btn">Tweet</button>
				    		</div>
				    	</form>
				    </div>
				    <!-- <div role="tabpanel" class="tab-pane" id="email">...</div>
				    <div role="tabpanel" class="tab-pane" id="link">...</div> -->
				  </div>
				</div>
		      </div>
		    </div>
		  </div>
		</div>
		
	<script type="text/javascript">
	$(function(){
		/*
	 		$('#return').datetimepicker({format: "m/d/Y",'timepicker': false,closeOnDateSelect: true,scrollMonth: false});
            $('#departuredate').datetimepicker({ format: "m/d/Y",minDate: 0,'timepicker': false,closeOnDateSelect: true,scrollMonth: false,
                        onSelectDate: function(selectedDate)
                        {
                                $("#return").focus();
                                $( "#return" ).datetimepicker({format: "m/d/Y", minDate: selectedDate,scrollMonth: false });
                        }
              }); */
             $('#departuredate').datepicker(
               	{
               		minDate: 0,
               		onSelect: function()
               		{
               			setTimeout(function function_name (argument) {
							 $('#return').focus();
						   },200);
               			
               		},
               		  onClose: function(selectedDate) {
        					// Set the minDate of 'to' as the selectedDate of 'from'
        						$("#return").datepicker("option", "minDate", selectedDate);
    					}
               	}
               	
               );
              $('#return').datepicker({
              		minDate:0,
              		onSelect: function()
               		{
               		/*	setTimeout(function function_name (argument) {
							 $('#cabintab').focus();
						   },50);
               			*/
               		},
              	
              	}) ;
       }); 

	$(".flight-search-show").click(function(){
		$(".flight-search-panel").toggleClass('in');
	});

			
			
			
			$('#passenger').change(function(){
				$('#traveller').val($('#passenger').val());
			});
		</script>
		<script>
		$(document).ready(function(){
			if("{{request.GET.returnkey}}"==''){
				$('.travelers-down-menu').addClass('full-width-res');
			}
		});
			
		</script>
		
		
			{% include "flightsearch/footer.html" %}
			<script src="{% static 'flightsearch/js/vendor/bootstrap.min.js' %}"></script>
			<script>
				$(document).ready(function(){
					if(($('.chk-airlines').length) != ($('.chk-airlines:checked').length)){
						
						$("#selectairline").prop('checked', false);
					}
					else
					{ 
						$("#selectairline").prop('checked', true);
					}
					
					if(($('.chk-stoppage').length) != ($('.chk-stoppage:checked').length)){
						
						$("#selectallstop").prop('checked', false);
					}
					else
					{ 
						$("#selectallstop").prop('checked', true);
					}
					
				});
			</script>
			<script>
			//@@@ SELECT ALL CABIN@@@@@@@@@ 
			$(document).ready(function() {
					
			$("#checkallcabin").on("click", function() {
			        if ($(this).is(':checked')) {
			        	$(".chk").each(function(){
			        		this.checked = true; 
			        	
			        });
			        } else {
			            $(".chk").each(function(){
	        			this.checked = false;
	            	});
		        }
		    	});
		    $(".chk").on("click",function(){
		    	if(!$(this).is(':checked')){
		    		$("#checkallcabin").attr('checked', false);
		    	}
		    });
		    
		    
		    //@@@@ SELECT ALL AIRLINES @@@@@@@@@
		    var airlines = {}
		    $("#selectairline").on("click", function() {
			        if ($(this).is(':checked')) {
			        	$(".chk-airlines").each(function(){
			        		this.checked = true; 
			        	
			        });
			        } else {
			            $(".chk-airlines").each(function(){
	        			this.checked = false;
	            	});
		        }
		    	});
		    $(".chk-airlines").on("click",function(){
		    	if(!$(this).is(':checked')){
		    		$("#selectairline").attr('checked', false);
		    	}
		    });
		    
		   //@@@@ SELECT ALL STOPPAGE @@@@@@@@@ 
		   
		    $("#selectallstop").on("click", function() {
			        if ($(this).is(':checked')) {
			        	$(".chk-stoppage").each(function(){
			        		this.checked = true; 
			        	
			        });
			        } else {
			            $(".chk-stoppage").each(function(){
	        			this.checked = false;
	            	});
		        }
		    	});
		    $(".chk-stoppage").on("click",function(){
		    	if(!$(this).is(':checked')){
		    		$("#selectallstop").attr('checked', false);
		    	}
		    });
		   
		   });
			</script>

			<script>
			var deptmintime ;
			var arivemintime; 
			var deptmaxtime;
			var arivemaxtime;
			
			function timeconversion(time)
			{
					var val = time;
					var hour;
					ampm = val.split(' ');
					mindepature = ampm[0].split(':');
					hour = mindepature[0];
					
					if($.trim(ampm[1]) != "p.m." && $.trim(ampm[1]) != "PM") 
					{
						
		
						if(parseInt(hour) > 11)
						{
							hour = 0;
						}	
					}
					else
					{
						
						hour = parseInt(hour)+12;
						
					}
					minute = mindepature[1];	
					deptmin = (hour*60);
					if(minute)
					{
						deptmin = parseInt(deptmin)+parseInt(minute);
					}
					
					return deptmin;
					
				
			}
				
				if ("{{timedata}}")
				{
					
					var dept = "{{ timedata.mindept }}";
					if(dept != "None")
					{
						deptmintime = timeconversion(dept);
					}
					else{
						deptmintime=0;
					}
					
					var arive = "{{ timedata.minarival }}";
					if(arive != "None")
					{
						arivemintime = timeconversion(arive);
					}
					else{
						arivemintime=0;
					}
					var maxdeparture = "{{ timedata.maxdept }}";
					if(maxdeparture != "None")
					{
						deptmaxtime = timeconversion(maxdeparture);
					}
					else{
						deptmaxtime=1439;
					}
					
					var maxarivaltime = "{{ timedata.maxarival }}";
					
					if(maxarivaltime != "None")
					{
						
						arivemaxtime = timeconversion(maxarivaltime);
						
					}
					else{
						arivemaxtime=1439;
					}
				}
				else{
				  	deptmintime=0;
				  	arivemintime=0;
				  	deptmaxtime=1439;
				  	arivemaxtime=1439;
					
				}
			
			
			
			 
			 
			
				/*************************** SLIDER DECTION  ******************************/
				$("#depart").slider({
					range : true,
					min : 0,
					max : 1439,
					values : [deptmintime, deptmaxtime],
					slide : slideTime1
				});
				var depaturemin = $('depaturemin').val();
	            var depaturemax = $('depaturemax').val();
	            var arivalmin = $('arivalmin').val();
	            var arivalmax = $('arivalmax').val();
				function slideTime1(event, ui) {
					var val0 = $("#depart").slider("values", 0),
						val1 = $("#depart").slider("values", 1),
					    minutes0 = parseInt(val0 % 60, 10),
					    hours0 = parseInt(val0 / 60 % 24, 10),
					    minutes1 = parseInt(val1 % 60, 10),
					    hours1 = parseInt(val1 / 60 % 24, 10);
						start = getTime(hours0, minutes0);
						end = getTime(hours1, minutes1);
						$('#depaturemin').val(start);
						$('#depaturemax').val(end);
						depaturemin = start;
						depaturemax = end;
						$("#time").text(start + ' - ' + end);
				}

				$("#arive").slider({
					range : true,
					min : 0,
					max : 1439,
					values : [arivemintime, arivemaxtime],
					slide : slideTime
				});

				function slideTime(event, ui) {
					var val0 = $("#arive").slider("values", 0),
					    val1 = $("#arive").slider("values", 1),
					    minutes0 = parseInt(val0 % 60, 10),
					    hours0 = parseInt(val0 / 60 % 24, 10),
					    minutes1 = parseInt(val1 % 60, 10),
					    hours1 = parseInt(val1 / 60 % 24, 10);
						startTime = getTime(hours0, minutes0);
						$('#arivalmin').val(startTime);
						endTime = getTime(hours1, minutes1);
						$('#arivalmax').val(endTime);
						arivalmin = startTime;
						arivalmax = endTime;
						$("#arivaltime").text(startTime + ' - ' + endTime);
				}

				function getTime(hours, minutes) {
					var time = null;
					minutes = minutes + "";
					if (hours < 12) {
						time = "AM";
					} else {
						time = "PM";
					}
					if (hours == 0) {
						hours = 12;
					}
					if (hours > 12) {
						hours = hours - 12;
					}
					if (minutes.length == 1) {
						minutes = "0" + minutes;
					}
					return hours + ":" + minutes + " " + time;
				}

				slideTime();
				slideTime1();
				
	$(function() {
    
    $( "#from" ).autocomplete({
    	open: function(event, ui) {
	        	$('.ui-autocomplete').off('menufocus hover mouseover');
    		},
    	autoFocus: true,
    	source: "get_airport/",
    	minLength: 2,
    	select: function(event, ui) {
    		$('#fromid').val(ui.item.id);
    	},
    });
    $( "#to" ).autocomplete({
    	open: function(event, ui) {
	        	$('.ui-autocomplete').off('menufocus hover mouseover');
    		},
    	autoFocus: true,
    	source: "get_airport/",
    	minLength: 2,
    	select: function(event, ui) {
    		$('#toid').val(ui.item.id);
    	},
    });
  });
			</script>
			
<script>
	$(function(){
		if ($(window).width() < 768) {
			$(".filters-holder").addClass('filters-holder-ht');
			$(".show-filter").click(function(){
				$(this).parent().parent().toggleClass('filters-holder-ht');
			});
		}
		$( "#cabintab" ).focus(function(){
			$(".travelers-holder").addClass('open');
			return false;
		});

		$( "#cabintab" ).click(function(){
			$(".travelers-holder").addClass('open');
			return false;
		});
		
		$(".form_val").focus(function(){
			if(!$(this).hasClass("cabin_type")){ $(".travelers-holder").removeClass('open'); }
		});
	});
	$('#apply_traveler').click(function(){
		$(".travelers-holder").removeClass('open');
	});
</script>
<script>
	$(document).ready(function() {
		$(".alert-warning").hide();
		var tno='';
		if("{{request.GET.passenger}}"){
			tno = "{{request.GET.passenger}}";
		}
		else{
			tno ="{{passenger}}";
		}
		$('#adults').val(tno);			
		$('#traveller').val(tno);
		//$('#passenger').val(tno);
		travelinfo();
	});
</script>
<script>
	
	var total;
	
//@@increase decrease on buttom click
    $(function () {
    $('.add').on('click',function(){
    	total = tatalpassenger();
    	if(total < 6 )
    	{
        var $qty=$(this).closest('p').find('.qty');
        var currentVal = parseInt($qty.val());
        if (!isNaN(currentVal)) {
            $qty.val(currentVal + 1);
        }
        travelinfo();
       }
    });
    $('.minus').on('click',function(){
    	total = tatalpassenger();
    	if(total > 0){
        var $qty=$(this).closest('p').find('.qty');
        var currentVal = parseInt($qty.val());
        if (!isNaN(currentVal) && currentVal > 0) {
            $qty.val(currentVal - 1);
        }
        
        travelinfo();
       }
    });
    
});
$('#cabintype').on('change',function(){
	travelinfo();
});
/*
$(document).ready(function(){
	$('#passenger').val('1');
	$(".alert-warning").hide();
});
*/
//@@@Cabin select@@@@

$(document).ready(function(){
	//travelinfo();
	
});



function travelinfo(){
	total = tatalpassenger();
	$('#passenger').val(total);
	var text;
	if(total == 1){
		text = "traveler";
	}
	else{
		text = "travelers";
	}
	var selectedcabin = $("#cabintype option:selected").text();
	var html = "<span id='travelar'>"+total+" "+text+", "+selectedcabin+"</span>";
	$('#travelar').replaceWith(html);
	if(total == 0){
		var msg='';
		$('#submitid').prop('disabled', true);
		$(".alert-warning").empty();
		msg="You must select atleast one traveler";
		$(".alert-warning").append(msg);
		$(".alert-warning").show();
	}
	else{
		$('#submitid').prop('disabled', false);
		$(".alert-warning").hide();
	}
}
//@@@Total Passenger@@@@
function tatalpassenger() {
var sum = 0;
$('.numberHolder').each(function(){
    sum += parseFloat($(this).val());
});
return sum;
};
 
//@@not close on click dropdown

  $('.dropdown-menu .down-menu-block').click(function(e) {
        e.stopPropagation();
    });
	
</script>
<script type="text/javascript">

//@@---------------------- pagination -------------------------------------
		var call_sent = "completed";
            var pagecount = 2;
            var is_data = 1 ;
            $(window).scroll(function(){
            	var doch =($(document).height()-200);
            	var winh = ($(window).height() + 200);
                    if  ($(window).scrollTop() >= doch - winh){
        //            if(parseInt($(window).scrollTop()) >= parseInt( $("footer").offset().top - $("footer").outerHeight() - 200) ){	
//		alert("1");
                    	if(is_data > 0)
                    	{
			if(call_sent == "completed") {
                       loadArticle(pagecount);
                       
                       pagecount++; }
                      }
                    }
            }); 
 			var urls = ("{{request.get_full_path}}");
            function loadArticle(pageNumber){   
		call_sent = "in_progress"; 
            	var airline =new Array();
            	var stoppage = new Array();
            	var row_val = "";
            	if($('#rowid').length)
            	{
            		row_val = "&rowid="+$('#rowid').val() ;
            		
            	}
             	$(".chk-airlines:checked").each(function(){
	        			airline.push($(this).val());
	        			
	            	});
	            
	            $(".chk-stoppage:checked").each(function(){
	        			stoppage.push($(this).val());
	        			
	            	});
	            	var multicity='';
	            	var multicity1 = "{{request.GET.multicity}}";
	            	if (multicity1 != '')
	            	{
	            		multicity = "&multicity="+multicity1;
	            	}
	            	console.log(multicity);
	            	var stoplenght = stoppage.length;
	            	var airlinelenght = airline.length;
                    $.ajax({
                        url:urls,
                        type:'POST',
                        data: "action="+encodeURI('infinite_scroll')+"&page_no="+encodeURI(pageNumber)+ "&loop_file=loop&csrfmiddlewaretoken={{ csrf_token }}&depaturemin="+depaturemin+"&depaturemax="+depaturemax+"&airlines="+airline+"&stoppage="+stoppage+row_val+multicity, 
                        success: function(html){
                            $("#content").append(html);   // This will be the div where our content will be loaded
				call_sent = "completed";
                            if($("#nodata").length) is_data = 0 ;
                            
                            
                        }
                    });
                return false;
            }
</script>

<script>
$(document).ready(function(){

	// hide #back-top first
	$("#back-top").hide();
	
	// fade in #back-top
	$(function () {
		$(window).scroll(function () {
			if ($(this).scrollTop() > 100) {
				$('#back-top').fadeIn();
			} else {
				$('#back-top').fadeOut();
			}
		});

		// scroll body to 0px on click
		$('#back-top a').click(function () {
			$('body,html').animate({
				scrollTop: 0
			}, 800);
			return false;
		});
	});

});
</script>
<script>
			// ==========show/hide details=======================================
			$(document.body).on('click', '.show-details' ,function(){
			//$('.show-details').on('click',function () {
			    var collapse_content_selector = $(this).attr('href');
			    var toggle_switch = $(this);
			    $(collapse_content_selector).slideToggle(function () {
			        $(this).is(':visible')? toggle_switch.text('HIDE DETAILS') : toggle_switch.text('SHOW DETAILS');
			    });
			});
		</script>
<script>
	$(document.body).on('click','.share',function(){
		var record = $(this).attr("id");
		$('#recorid').val(record);
	});
</script>



